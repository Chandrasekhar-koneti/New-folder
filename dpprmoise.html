<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>const posts =[

      {
          title: 'Post one',
          body: 'this is post 1',
      },
      {
          title: 'Post two',
          body: 'this is post 2',
      }
      ];
      function getPosts()
      {
      setTimeout(() =>
      {
          let output = '';
          posts.forEach((post,index) => {
                  output += `<li>${post.title} </li>`;
          });
          console.log(output);
          document.body.innerHTML = output;
      }, 1000);
      }
      
      function createpost(post)
      {
      return new Promise((resolve,reject)=>
      {
          setTimeout(()=>
          {
              posts.push(post);
              const error=false;
              if(!error){
                  resolve();
              }
              else{
                  reject();
              }
          },3000)
      });
      }
      
      function create4thPost(post)
      {
      return new Promise((resolve,reject)=>
      {
          setTimeout(()=>
          {
              posts.push(post);
              const error=false;
              if(!error){
                  resolve();
              }
              else{
                  reject();
              }
          },3000)
      });
      }
      
      
      function deletepost(post){
      return new Promise((resolve,reject)=>{
          setTimeout(()=>{
              if(posts.length>0){
                  resolve(posts.pop())
              }
              else{
                  reject('array is empty')
              }
          },1000);
      })
      }
      createpost({title:'post three', body:'this is 3rd post'})
      create4thPost({title:'post four', body:'this is 4th post'}).then(()=>{
      getPosts() 
      deletepost().then(()=>{
          getPosts()
          deletepost().then(()=>{
              getPosts()
              deletepost().then(()=>{
                  getPosts()
                  deletepost().then(()=>{
                      getPosts()
                      deletepost().then(()=>{})
                      .catch((err)=>{
                          console.log('inside catch block', err)
                  })
                  
                  })
              })
          })
      })
      })
      
      
      
      
      
      </script>
</body>
</html>